<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>18. –ö—Ä–∏—Å—Ç–∏–Ω–∞ ‚Äî –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</title>
  <meta name="description" content="–û–Ω–ª–∞–π–Ω-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ 18-–ª–µ—Ç–∏–µ –ö—Ä–∏—Å—Ç–∏–Ω—ã: –º–µ—Å—Ç–æ, –≤—Ä–µ–º—è, wish list –∏ RSVP">

  <!-- New fonts for equal numerals -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Marcellus&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#faf6f5; --card:#ffffff; --text:#272424; --muted:#6c6a6a;
      --accent:#f3c8d6; --radius:18px; --shadow:0 12px 30px rgba(0,0,0,.08); --max: 980px;
    }
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:'DM Sans',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    h1,h2,.serif{font-family:'Marcellus',serif; letter-spacing:.2px; font-variant-numeric: lining-nums tabular-nums;}
    a{color:#6b5bbd;text-decoration:none}
    img{max-width:100%;display:block}
    .container{max-width:var(--max);margin:0 auto;padding:24px}
    header.hero{position:relative;min-height:82vh;display:grid;place-items:center;overflow:hidden;border-bottom:1px solid #eddfe3}
    .hero-bg{position:absolute;inset:0;background:
      linear-gradient(180deg,rgba(255,255,255,.15),rgba(250,246,245,.85)),
      url('./images/hero.jpg') center/cover no-repeat;
      will-change:transform; filter:blur(.6px) saturate(1.05) brightness(.98); transform:translateY(0)}
    .hero-card{position:relative;background:rgba(255,255,255,.62);backdrop-filter: blur(6px);
      border-radius:26px;padding:32px 30px 24px;box-shadow:var(--shadow);
      border:1px solid rgba(0,0,0,.06);width:min(780px,92%);text-align:center}
    .title{font-weight:700;font-size:56px;line-height:1.06;margin:4px 0 8px; font-variant-numeric: lining-nums tabular-nums;}
    .heart{display:inline-block;color:var(--accent);text-shadow:0 1px 4px rgba(243,200,214,.35);
      transform:translateY(-.06em);animation:beat 4s ease-in-out infinite}
    @keyframes beat{0%,100%{transform:scale(1) translateY(-.06em)}50%{transform:scale(1.06) translateY(-.06em)}}
    .subtitle{color:#5c5457;font-size:16px;margin:0 0 12px}
    .pill{display:inline-block;padding:8px 14px;border-radius:30px;background:rgba(243,200,214,.22);
      color:#4e3a42;border:1px solid rgba(243,200,214,.45);font-weight:700;margin:0 6px}
    .actions{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:16px}
    .btn{appearance:none;border:0;cursor:pointer;border-radius:14px;padding:12px 16px;font-weight:700}
    .btn-primary{background:var(--accent);color:#3a2730}
    .btn-ghost{background:rgba(255,255,255,.7);color:#1f1f1f;border:1px solid rgba(0,0,0,.08)}
    nav.tabs{position:sticky;top:0;background:rgba(250,246,245,.8);backdrop-filter: blur(10px);border-bottom:1px solid #eddfe3;z-index:50}
    .tabs .container{display:flex;gap:14px;flex-wrap:wrap}
    .tab{padding:12px 10px;color:#7b7275} .tab:hover{color:#000}
    .floating{position:fixed;top:14px;right:14px;z-index:60;display:flex;gap:8px}
    .floating .btn{padding:10px 12px}
    section{scroll-margin-top:70px}
    .grid{display:grid;gap:18px}
    .card{background:var(--card);border:1px solid #efe3e6;border-radius:var(--radius);box-shadow:var(--shadow)}
    .card .card-inner{padding:20px}
    .h2{font-size:34px;margin:0 0 6px; font-variant-numeric: lining-nums tabular-nums;}
    .muted{color:var(--muted)}
    .row{display:flex;gap:16px;flex-wrap:wrap}
    .badge{display:inline-flex;align-items:center;gap:8px;background:#fff7f9;border:1px solid #f1d9e3;border-radius:12px;padding:8px 12px;color:#5a5a5a}
    .color-dot{width:14px;height:14px;border-radius:50%}
    .info{display:grid;gap:18px;grid-template-columns:1fr;} @media(min-width:900px){.info{grid-template-columns:1.2fr .8fr}}
    .countdown{display:flex;justify-content:center;gap:14px;margin-top:10px}
    .cd-item{background:#fff;border:1px solid #ecdde3;padding:12px 10px;border-radius:12px;min-width:70px}
    .cd-num{font-size:24px;font-weight:800;text-align:center;font-family:'DM Sans',sans-serif; font-variant-numeric: tabular-nums;}
    .cd-label{font-size:11px;color:var(--muted);text-align:center}
    .divider{display:flex;align-items:center;gap:10px;margin:14px 0 4px;}
    .divider:before,.divider:after{content:"";flex:1;height:1px;background:linear-gradient(90deg,rgba(0,0,0,.06),rgba(0,0,0,.18),rgba(0,0,0,.06))}
    .divider .spark{font-size:14px;opacity:.6}
    .wish-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:14px;margin-top:10px}
    .wish-card{position:relative;border:1px solid #eadfe1;border-radius:14px;overflow:hidden;background:#fff;display:flex;flex-direction:column}
    .wish-img{aspect-ratio:4/3;object-fit:cover;width:100%}
    .wish-body{padding:10px 12px}
    .wish-title{font-weight:700;margin:0 0 6px;font-family:'Marcellus',serif}
    .wish-meta{font-size:12px;color:var(--muted)}
    .wish-actions{display:flex;gap:8px;margin-top:10px}
    .wish-actions a,.wish-actions button{flex:1;text-align:center}
    .booked{opacity:.65}
    .booked-badge{position:absolute;top:10px;left:10px;background:rgba(243,200,214,.9);color:#3a2630;font-weight:800;font-size:12px;padding:6px 8px;border-radius:10px;border:1px solid rgba(0,0,0,.06);display:none}
    .booked .booked-badge{display:inline-block}
    footer{padding:40px 0;color:var(--muted);text-align:center}
    .note{background:#fff7f9;border:1px dashed #e7bfd0;padding:12px 14px;border-radius:12px;color:#5a3c47}
    .schedule{display:grid;gap:10px}
    .schedule-item{display:grid;grid-template-columns:90px 1fr;gap:14px;align-items:start}
    .schedule-time{font-weight:800}
  </style>
</head>
<body>

<div class="floating">
  <button id="musicToggle" class="btn btn-ghost">–ú—É–∑—ã–∫–∞: –≤–∫–ª</button>
  <a class="btn btn-primary" href="https://t.me/dioravva" target="_blank" rel="noopener">–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</a>
</div>
<audio id="bgAudio" loop preload="auto" src="./music.mp3"></audio>

<header class="hero" id="home">
  <div class="hero-bg" id="hero-bg"></div>
  <div class="hero-card">
    <div class="pill" id="date-pill">20 —Å–µ–Ω—Ç—è–±—Ä—è 2025 ¬∑ 15:30</div>
    <h1 class="title"><span class="serif">18</span> <span class="heart" aria-hidden="true">‚ô•</span> <span class="serif">–ö—Ä–∏—Å—Ç–∏–Ω–∞</span></h1>
    <p class="subtitle">–ü—Ä–∏–≥–ª–∞—à–∞—é —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Ç–µ–ø–ª–æ —ç—Ç–æ–≥–æ –≤–µ—á–µ—Ä–∞</p>
    <div class="countdown" id="countdown" aria-live="polite"></div>
    <div class="actions">
      <a class="btn btn-primary" href="#message">–°–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏</a>
      <a class="btn btn-ghost" href="#rsvp">–û—Ç–≤–µ—Ç–∏—Ç—å (RSVP)</a>
    </div>
  </div>
</header>

<nav class="tabs">
  <div class="container">
    <a class="tab" href="#message">–ü–∏—Å—å–º–æ</a>
    <a class="tab" href="#info">–ú–µ—Å—Ç–æ</a>
    <a class="tab" href="#wishlist">wish list</a>
    <a class="tab" href="#dresscode">–î—Ä–µ—Å—Å–∫–æ–¥</a>
    <a class="tab" href="#guestbook">–ì–æ—Å—Ç–µ–≤–∞—è</a>
    <a class="tab" href="#schedule">–ü—Ä–æ–≥—Ä–∞–º–º–∞</a>
    <a class="tab" href="#gallery">–§–æ—Ç–æ</a>
    <a class="tab" href="#rsvp">RSVP</a>
  </div>
</nav>

<main class="container">

  <section id="message" class="grid" style="margin-top:18px">
    <div class="card">
      <div class="card-inner">
        <h2 class="h2 serif">18. –ö—Ä–∏—Å—Ç–∏–Ω–∞</h2>
        <div style="line-height:1.8">
          <p>–ü—Ä–∏–≤–µ—Ç, –¥–æ—Ä–æ–≥–æ–π –¥—Ä—É–≥.</p>
          <p>–≠—Ç–æ—Ç –¥–µ–Ω—å —è –±—ã –Ω–µ —Ö–æ—Ç–µ–ª–∞ –¥–µ–ª–∏—Ç—å —Å –∫–µ–º –±—ã —Ç–æ –Ω–∏ –±—ã–ª–æ –µ—â—ë. –¢–æ–ª—å–∫–æ —Å —Ç–µ–º–∏, –∫—Ç–æ –¥–µ–ª–∞–µ—Ç –º–æ—é –∂–∏–∑–Ω—å —è—Ä—á–µ –∏ —á—å—ë –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –¥–ª—è –º–µ–Ω—è ‚Äî –ø–æ–¥–∞—Ä–æ–∫. –° —Ç–æ–±–æ–π.</p>
          <p>–ü—Ä–∏–≥–ª–∞—à–∞—é –≤–∞—Å —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Å–æ –º–Ω–æ–π —Ç–µ–ø–ª–æ —ç—Ç–æ–≥–æ –≤–µ—á–µ—Ä–∞ –∏ –æ—Ç–º–µ—Ç–∏—Ç—å –º–æ—ë –≤–æ—Å–µ–º–Ω–∞–¥—Ü–∞—Ç–∏–ª–µ—Ç–∏–µ.</p>
          <p><strong>–í—Å—Ç—Ä–µ—á–∞–µ–º—Å—è:</strong> –ü–∏—Ä–æ—á–∏, —É–ª. –û–∫—Å–∫–∞—è 232–ê<br>
          <strong>–°–æ–±–∏—Ä–∞–µ–º—Å—è:</strong> 20.09.2025 –≤ 15:30<br>
          –ú–µ—Å—Ç–æ, –≥–¥–µ –±—É–¥–µ—Ç —É—é—Ç–Ω–æ, —Å–≤–µ—Ç–ª–æ –∏ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É.</p>
          <div class="divider"><span class="spark">‚úß</span></div>
          <p><em>–° –ª—é–±–æ–≤—å—é,<br>–ö—Ä–∏—Å—Ç–∏–Ω–∞.</em></p>
        </div>
      </div>
    </div>
  </section>

  <section id="info" class="grid info">
    <div class="card">
      <div class="card-inner">
        <h2 class="h2 serif">–ì–¥–µ –∏ –∫–æ–≥–¥–∞</h2>
        <p class="muted">20 —Å–µ–Ω—Ç—è–±—Ä—è 2025 ¬∑ 15:30</p>
        <div class="row" style="margin-top:10px">
          <span class="badge">üìç <strong>–ü–∏—Ä–æ—á–∏</strong></span>
          <span class="badge">üó∫Ô∏è <span>—É–ª. –û–∫—Å–∫–∞—è 232–ê</span></span>
        </div>
        <div class="actions" style="justify-content:flex-start;margin-top:16px">
          <a class="btn btn-primary" href="https://www.google.com/maps?q=–ü–∏—Ä–æ—á–∏, —É–ª. –û–∫—Å–∫–∞—è 232–ê" target="_blank" rel="noopener">–û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É</a>
        </div>
      </div>
    </div>
  </section>

  <section id="wishlist" class="grid" style="margin-top:18px">
    <div class="card">
      <div class="card-inner">
        <h2 class="h2 serif">wish list</h2>
        <div class="note" style="margin:8px 0 10px">
          <strong>–ú–æ–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è:</strong><br>
          –ì–ª–∞–≤–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ ‚Äî –≤–∞—à–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ. –ù–æ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å –º–Ω–µ –ø—Ä–∏—è—Ç–Ω–æ–µ, –º–æ–π wish list –ø–æ–º–æ–∂–µ—Ç —Å –∏–¥–µ–µ–π.
        </div>
        <p class="muted">–ï—Å–ª–∏ –≤—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ –æ–¥–µ–∂–¥—É, –º–æ–π —Ä–∞–∑–º–µ—Ä ‚Äî —Å–∞–º—ã–π –º–∞–ª–µ–Ω—å–∫–∏–π: 38‚Äì42 (XXS‚ÄìXS).</p>
        <div class="wish-grid" id="wishGrid"></div>
        <p class="muted" style="margin-top:12px">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–º–µ—Ç—å—Ç–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ –≤ RSVP –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–æ–≤.</p>
      </div>
    </div>
  </section>

  <section id="dresscode" class="grid" style="margin-top:18px">
    <div class="card">
      <div class="card-inner">
        <h2 class="h2 serif">–î—Ä–µ—Å—Å-–∫–æ–¥</h2>
        <p class="muted">–£—é—Ç–Ω—ã–π –º–∏–Ω–∏–º–∞–ª–∏–∑–º. –í—ã ‚Äî –≤–∞—à–∞ –ª—É—á—à–∞—è –≤–µ—Ä—Å–∏—è. –î–ª—è –¥–µ–≤—É—à–µ–∫ ‚Äî –Ω–µ–∂–Ω–æ-—Ä–æ–∑–æ–≤—ã–π, –±–µ–∂–µ–≤—ã–π, –ø–∞—Å—Ç–µ–ª—å–Ω—ã–µ —Å–≤–µ—Ç–ª—ã–µ; –¥–ª—è –º—É–∂—á–∏–Ω ‚Äî –±–µ–ª—ã–π –∏ –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π.</p>
        <div class="row" style="margin-top:12px">
          <div class="muted" style="margin:4px 0; width:100%">–î–ª—è –¥–µ–≤—É—à–µ–∫:</div>
          <span class="badge"><span class="color-dot" style="background:#F2C9D0"></span> #F2C9D0</span>
          <span class="badge"><span class="color-dot" style="background:#E7D2BE"></span> #E7D2BE</span>
          <span class="badge"><span class="color-dot" style="background:#F3EFE3"></span> #F3EFE3</span>
        </div>
        <div class="row" style="margin-top:8px">
          <div class="muted" style="margin:4px 0; width:100%">–î–ª—è –º—É–∂—á–∏–Ω:</div>
          <span class="badge"><span class="color-dot" style="background:#FFFFFF"></span> #FFFFFF</span>
          <span class="badge"><span class="color-dot" style="background:#4A2B26"></span> #4A2B26</span>
        </div>
      </div>
    </div>
  </section>

  <section id="guestbook" class="grid" style="margin-top:18px">
    <div class="card">
      <div class="card-inner">
        <h2 class="h2 serif">–ì–æ—Å—Ç–µ–≤–∞—è</h2>
        <div class="grid" style="grid-template-columns:1fr;gap:16px">
          <div class="note">
            <strong>–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</strong><br>
            –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ç–æ ‚Äî –æ–Ω–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–Ω–∏–∑—É –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞. –ß—Ç–æ–±—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –∏–º–∏ —Å–æ –º–Ω–æ–π, –Ω–∞–∂–º–∏—Ç–µ ¬´–û—Ç–∫—Ä—ã—Ç—å Telegram¬ª –∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–∞–π–ª—ã –≤ —á–∞—Ç. –§–æ—Ç–æ <em>–Ω–∏–≥–¥–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è</em> –Ω–∞ —Å–∞–π—Ç–µ.
          </div>
          <input id="photoInput" type="file" accept="image/*" multiple style="padding:10px;border:1px solid #eadfe1;border-radius:12px;background:#fff">
          <div id="photoPreview" class="gallery"></div>
          <div class="actions">
            <a class="btn btn-primary" href="https://t.me/dioravva" target="_blank" rel="noopener">–û—Ç–∫—Ä—ã—Ç—å Telegram @dioravva</a>
          </div>

          <div class="note">
            <strong>–ü–æ–∂–µ–ª–∞–Ω–∏—è</strong><br>
            –ù–∞–ø–∏—à–∏—Ç–µ —Ç—ë–ø–ª—ã–µ —Å–ª–æ–≤–∞ ‚Äî –∫–Ω–æ–ø–∫–∞ –Ω–∏–∂–µ –æ—Ç–∫—Ä–æ–µ—Ç Telegram —Å –≥–æ—Ç–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º.
          </div>
          <textarea id="wishText" rows="4" placeholder="–í–∞—à–µ –ø–æ–∂–µ–ª–∞–Ω–∏–µ‚Ä¶" style="width:100%;padding:12px;border:1px solid #eadfe1;border-radius:12px"></textarea>
          <div class="actions">
            <a id="sendWish" class="btn btn-ghost" href="#" target="_blank" rel="noopener">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="schedule" class="grid" style="margin-top:18px">
    <div class="card">
      <div class="card-inner">
        <h2 class="h2 serif">–ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤–µ—á–µ—Ä–∞</h2>
        <div class="schedule">
          <div class="schedule-item"><div class="schedule-time">15:30</div><div class="muted">–°–±–æ—Ä –≥–æ—Å—Ç–µ–π, welcome-drinks</div></div>
          <div class="schedule-item"><div class="schedule-time">16:30</div><div class="muted">–¢—ë–ø–ª—ã–µ —Å–ª–æ–≤–∞ –∏ —Ñ–æ—Ç–æ</div></div>
          <div class="schedule-item"><div class="schedule-time">18:00</div><div class="muted">–£–∂–∏–Ω</div></div>
        </div>
      </div>
    </div>
  </section>

  <section id="gallery" class="grid" style="margin-top:18px">
    <div class="card">
      <div class="card-inner">
        <h2 class="h2 serif">–§–æ—Ç–æ</h2>
        <div class="gallery"></div>
      </div>
    </div>
  </section>

  <section id="rsvp" class="grid" style="margin-top:18px">
    <div class="card">
      <div class="card-inner">
        <h2 class="h2 serif">RSVP</h2>
        <p class="muted">–°–æ–æ–±—â–∏—Ç–µ, —Å–º–æ–∂–µ—Ç–µ –ª–∏ –ø—Ä–∏–π—Ç–∏, –∏ —É–∫–∞–∂–∏—Ç–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—â–∏—Ö/–ø–æ–∂–µ–ª–∞–Ω–∏—è.</p>
        <div class="actions">
          <a class="btn btn-primary" target="_blank" rel="noopener" href="#">–°–∫–æ—Ä–æ –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∞</a>
          <a class="btn btn-ghost" target="_blank" rel="noopener" href="https://t.me/dioravva">–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</a>
        </div>
      </div>
    </div>
  </section>

</main>

<footer>–°–¥–µ–ª–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é ‚ô• | ¬© <span id="year"></span></footer>

<script>
  // Parallax
  const heroBg = document.getElementById('hero-bg');
  let lastY=0, ticking=false;
  function onScroll(){ lastY = window.scrollY || window.pageYOffset; if(!ticking){ requestAnimationFrame(updateParallax); ticking=true; } }
  function updateParallax(){ const y = Math.min(lastY, 800); heroBg.style.transform = `translateY(${y*0.14}px) scale(1.04)`; ticking=false; }
  window.addEventListener('scroll', onScroll, {passive:true});

  // Countdown
  const pad = (n)=>String(n).padStart(2,'0');
  function startCountdown(){
    const box = document.getElementById('countdown');
    function render(diff){
      box.innerHTML = '';
      const make = (n,l)=>`<div class="cd-item"><div class="cd-num">${pad(n)}</div><div class="cd-label">${l}</div></div>`;
      box.insertAdjacentHTML('beforeend', make(diff.days,'–¥–Ω–µ–π'));
      box.insertAdjacentHTML('beforeend', make(diff.hours,'—á–∞—Å–æ–≤'));
      box.insertAdjacentHTML('beforeend', make(diff.mins,'–º–∏–Ω—É—Ç'));
      box.insertAdjacentHTML('beforeend', make(diff.secs,'—Å–µ–∫—É–Ω–¥'));
    }
    function tick(){
      const now = new Date(); const tgt = new Date(2025,8,20,15,30);
      const ms = tgt - now; if (ms<=0){ render({days:0,hours:0,mins:0,secs:0}); clearInterval(tmr); return; }
      const days = Math.floor(ms/86400000);
      const hours = Math.floor((ms%86400000)/3600000);
      const mins = Math.floor((ms%3600000)/60000);
      const secs = Math.floor((ms%60000)/1000);
      render({days,hours,mins,secs});
    }
    tick(); const tmr = setInterval(tick,1000);
  }
  startCountdown();
  document.getElementById('year').textContent = new Date().getFullYear();

  // Music toggle: local file or ambient fallback
  const audio = document.getElementById('bgAudio');
  const musicToggle = document.getElementById('musicToggle');
  let ctx, ambientRunning=false;
  function startAmbient(){
    if(ambientRunning) return;
    ambientRunning=true;
    ctx = new (window.AudioContext||window.webkitAudioContext)();
    const master = ctx.createGain(); master.gain.value = 0.14; master.connect(ctx.destination);
    const notes = [261.63, 329.63, 392.00, 523.25];
    function pad(freq, delay){
      const osc = ctx.createOscillator(); osc.type='sine'; osc.frequency.value=freq;
      const g = ctx.createGain(); g.gain.setValueAtTime(0, ctx.currentTime+delay);
      g.gain.linearRampToValueAtTime(0.12, ctx.currentTime+delay+2);
      g.gain.linearRampToValueAtTime(0.0, ctx.currentTime+delay+8);
      const filt = ctx.createBiquadFilter(); filt.type='lowpass'; filt.frequency.value=1200;
      osc.connect(filt); filt.connect(g); g.connect(master);
      osc.start(ctx.currentTime+delay); osc.stop(ctx.currentTime+delay+9);
    }
    function playLoop(){
      notes.forEach((n,i)=>pad(n, i*2.2));
      setTimeout(playLoop, 8500);
    }
    playLoop();
  }
  function stopAmbient(){ if(!ctx) return; ctx.close(); ctx=null; ambientRunning=false; }

  audio.volume = 0.5;
  musicToggle.addEventListener('click', async ()=>{
    try{
      if(audio.paused && !ambientRunning){ await audio.play(); musicToggle.textContent = '–ú—É–∑—ã–∫–∞: –≤—ã–∫–ª'; }
      else if(!audio.paused){ audio.pause(); musicToggle.textContent = '–ú—É–∑—ã–∫–∞: –≤–∫–ª'; }
      else if(ambientRunning){ stopAmbient(); musicToggle.textContent = '–ú—É–∑—ã–∫–∞: –≤–∫–ª'; }
    }catch(e){ startAmbient(); musicToggle.textContent = '–ú—É–∑—ã–∫–∞: –≤—ã–∫–ª'; }
  });

  // Wishlist (no denim skirt)
  const wishlist = [
    { id:'311624756', title:'–Æ–±–∫–∞-–±–∞–ª–ª–æ–Ω', platform:'WB', article:'311624756', img:'./images/wish-311624756.jpg', url:'https://www.wildberries.ru/catalog/0/search.aspx?search=311624756' },
    { id:'304378746', title:'–ü–æ—Å—Ç–µ–ª—å–Ω–æ–µ –±–µ–ª—å—ë', platform:'WB', article:'304378746', img:'./images/wish-304378746.jpg', url:'https://www.wildberries.ru/catalog/0/search.aspx?search=304378746' },
    { id:'202542554', title:'–•–∞–π–ª–∞–π—Ç–µ—Ä', platform:'WB', article:'202542554', img:'./images/wish-202542554.jpg', url:'https://www.wildberries.ru/catalog/0/search.aspx?search=202542554' },
    { id:'287367154', title:'–°—É–º–∫–∞', platform:'WB', article:'287367154', img:'./images/wish-287367154.jpg', url:'https://www.wildberries.ru/catalog/0/search.aspx?search=287367154' },
    { id:'2695637854', title:'–ú–∏—Å—Ç', platform:'Ozon', article:'2695637854', img:'./images/wish-2695637854.jpg', url:'https://www.ozon.ru/search/?text=2695637854' },
    { id:'RTLAEG952101', title:'–¢–æ–ª—Å—Ç–æ–≤–∫–∞', platform:'Lamoda', article:'RTLAEG952101', img:'./images/wish-RTLAEG952101.jpg', url:'https://www.lamoda.ru/catalogsearch/result/?q=RTLAEG952101' },
    { id:'popmart', title:'–§–∏–≥—É—Ä–∫–∞ Pop Mart', platform:'–ß–∏—Ç–∞–π-–≥–æ—Ä–æ–¥', article:'POP MART', img:'./images/wish-popmart.jpg', url:'https://www.chitai-gorod.ru/search?q=pop%20mart' },
  ];
  function loadBooked(){ try { return JSON.parse(localStorage.getItem('booked')||'{}'); } catch(e){ return {}; } }
  function saveBooked(map){ localStorage.setItem('booked', JSON.stringify(map)); }
  function renderWishlist(){
    const grid = document.getElementById('wishGrid');
    const booked = loadBooked();
    grid.innerHTML = '';
    wishlist.forEach(item=>{
      const card = document.createElement('div'); card.className = 'wish-card'; if(booked[item.id]) card.classList.add('booked');
      const badge = document.createElement('span'); badge.className = 'booked-badge'; badge.textContent = '–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ'; card.appendChild(badge);
      if(item.img){ const img = document.createElement('img'); img.className='wish-img'; img.src=item.img; img.alt=item.title; card.appendChild(img); }
      const body = document.createElement('div'); body.className='wish-body';
      const h = document.createElement('div'); h.className='wish-title'; h.textContent=item.title;
      const meta = document.createElement('div'); meta.className='wish-meta'; meta.textContent = `${item.platform} ¬∑ –ê—Ä—Ç. ${item.article}`;
      const actions = document.createElement('div'); actions.className='wish-actions';
      const link = document.createElement('a'); link.className='btn btn-ghost'; link.target='_blank'; link.rel='noopener'; link.href=item.url; link.textContent='–û—Ç–∫—Ä—ã—Ç—å';
      const btn = document.createElement('button'); btn.className='btn btn-primary'; btn.textContent = booked[item.id] ? '–°–Ω—è—Ç—å –±—Ä–æ–Ω—å' : '–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å';
      btn.addEventListener('click', ()=>{ const map = loadBooked(); map[item.id] = !map[item.id]; saveBooked(map); renderWishlist(); });
      actions.appendChild(link); actions.appendChild(btn);
      body.appendChild(h); body.appendChild(meta); body.appendChild(actions);
      card.appendChild(body); grid.appendChild(card);
    });
  }
  renderWishlist();

  // Photo preview + Telegram
  const input = document.getElementById('photoInput');
  const preview = document.getElementById('photoPreview');
  input?.addEventListener('change', ()=>{
    preview.innerHTML = '';
    [...input.files].slice(0,12).forEach(file=>{
      const url = URL.createObjectURL(file);
      const img = document.createElement('img');
      img.src = url; img.alt = file.name; img.style.borderRadius='12px'; img.style.border='1px solid #eadfe1';
      preview.appendChild(img);
    });
  });
  const wish = document.getElementById('wishText');
  const sendWish = document.getElementById('sendWish');
  sendWish?.addEventListener('click', (e)=>{
    e.preventDefault();
    const text = encodeURIComponent('–ü–æ–∂–µ–ª–∞–Ω–∏–µ –¥–ª—è –ö—Ä–∏—Å—Ç–∏–Ω—ã: ' + (wish.value||''));
    window.open('https://t.me/dioravva?text=' + text, '_blank');
  });
</script>
</body>
</html>
